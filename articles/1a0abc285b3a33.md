---
title: "æ­©è¡Œæ™‚ã®åŠ é€Ÿåº¦,è§’é€Ÿåº¦ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ­©è¡Œè»Œè·¡ã‚’æã„ã¦ã¿ãŸ"
emoji: "ğŸ˜‡"
type: "tech" 
topics: [Python]
published: true
---

æœ€è¿‘ã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦å±‹å†…æ¨å®šã‚’ã™ã‚‹ãŸã‚ã«å‹‰å¼·ã—ã¦ãŠã‚Šä»Šå›ã¯åŠ é€Ÿåº¦ã¨è§’é€Ÿåº¦ã‹ã‚‰æ­©è¡Œè»Œè·¡ã‚’æã„ãŸã®ã§ãã®æ–¹æ³•ã‚’æ›¸ã.è¨€èªã¯Pythonã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹.


## å®Ÿé¨“ç’°å¢ƒ
* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³(iPhoneXR)ã‚’ä¸‹è¨˜ç”»åƒã®ã‚ˆã†ãªãƒãƒ¼ãƒã«å…¥ã‚Œè…°ã«å·»ãä»˜ã‘ãŸçŠ¶æ…‹ã§è¡Œã†ï¼ãã®ãŸã‚ã‚¹ãƒãƒ›ã®å‘ãã¯æ¨ªå‘ãã§è£…ç€ã•ã‚Œã‚‹ï¼
* ã‚»ãƒ³ã‚·ãƒ³ã‚°å‹•ä½œã¯9æ­©ç›´é€²ã—ãŸå¾Œ,å·¦ã«90åº¦å›è»¢ã—5æ­©æ­©ãã¨ã„ã†å‹•ä½œã‚’è¡Œã†.
* åŠ é€Ÿåº¦ï¼Œè§’é€Ÿåº¦ã®å–å¾—ã«ã¯è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’åŒæ™‚ã«å–å¾—ã§ãã‚‹ã„ã‚‹ã‚¢ãƒ—ãƒªphyphoxã‚’ä½¿ç”¨ã™ã‚‹ï¼iOS,Androidå…±ã«æä¾›ã•ã‚Œã¦ã„ã‚‹.
* æ­©è¡Œãƒ‡ãƒ¼ã‚¿ã‚’ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«é–‹å§‹æ™‚ï¼Œçµ‚äº†æ™‚ã«ç´„5ç§’ã®æ™‚é–“ã‚’ç©ºã‘ã‚‹ï¼
* ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æ³¢æ•°ã¯100Hzï¼Œã¤ã¾ã‚Š0.01ç§’ã”ã¨ã«ã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ï¼
[![Image from Gyazo](https://i.gyazo.com/d67925cd1e4f5daf4919a15a7ae22da0.jpg)](https://gyazo.com/d67925cd1e4f5daf4919a15a7ae22da0)


phyphoxã®ç”»é¢(ã‚«ã‚¹ã‚¿ãƒ å®Ÿé¨“ã§åŠ é€Ÿåº¦ã¨ã‚¸ãƒ£ã‚¤ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ã‚’çµ„ã¿åˆã‚ã›ã‚‹)
[![Image from Gyazo](https://i.gyazo.com/2f7818cd9cf0f0d1934f4510d5392e12.png)](https://gyazo.com/2f7818cd9cf0f0d1934f4510d5392e12)


## æ­©æ•°æ¨å®š

ã¾ãšphyphoxã§å–å¾—ã§ããŸåŠ é€Ÿåº¦ã®CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã‚‹ï¼
```cs:Accelerometer.csv
"Time (s)","X (m/s^2)","Y (m/s^2)","Z (m/s^2)"
1.176791673E-3,8.904233551E0,-3.556604004E-1,4.019890594E0
1.125279168E-2,8.780890045E0,-3.487747192E-2,3.921844482E0
2.132879167E-2,8.837322693E0,1.197509766E-1,3.613186340E0
3.140579167E-2,9.055568848E0,5.284011841E-2,3.378474426E0
4.148179168E-2,9.088799744E0,2.619552612E-2,3.555256805E0
...
```


å¾Œã®ã‚³ãƒ¼ãƒ‰ã§æ‰±ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã«æœ€åˆã®ã‚«ãƒ©ãƒ åã‚’å¤‰æ›´ã™ã‚‹
```cs:Accelerometer.csv
"t","x","y","z"
1.176791673E-3,8.904233551E0,-3.556604004E-1,4.019890594E0
1.125279168E-2,8.780890045E0,-3.487747192E-2,3.921844482E0
2.132879167E-2,8.837322693E0,1.197509766E-1,3.613186340E0
3.140579167E-2,9.055568848E0,5.284011841E-2,3.378474426E0
4.148179168E-2,9.088799744E0,2.619552612E-2,3.555256805E0
...
```



ä»Šå›ã®æ­©è¡Œæ¨å®šã«ã¯ãƒãƒ«ãƒ ã‚’åˆ©ç”¨ã™ã‚‹ï¼ãƒãƒ«ãƒ ã¯x,y,zè»¸ã®åŠ é€Ÿåº¦ã‚’äºŒä¹—ã—ï¼Œãã‚Œã‚‰ã®å’Œã®å¹³æ–¹æ ¹ã‚’å–ã£ãŸã‚‚ã®ã§ã‚ã‚‹.ãƒãƒ«ãƒ ã‚’åˆ©ç”¨ã™ã‚Œã°ãƒ‡ãƒã‚¤ã‚¹ã®å‘ããŒå¤‰ã‚ã£ãŸã¨ã—ã¦ã‚‚åŠ é€Ÿåº¦ãŒåŒã˜ãªã‚‰ã°å¸¸ã«ä¸€å®šã«ãªã‚‹ï¼ãã®ãŸã‚ã‚ˆã‚Šç‰¹å®šã®è»¸ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã‚Šã‚‚ä¸€è²«ã—ãŸæ­©è¡Œæ¨å®šãŒå¯èƒ½ã§ã‚ã‚‹ï¼
Norm=âˆš(x^2 + y^2 + z^2)ã§å–å¾—ã§ãã‚‹ï¼

åŠ é€Ÿåº¦ã®Normã‚’æ±‚ã‚ã¦çµŒéæ™‚é–“(t)ã«ã‚ˆã‚‹é·ç§»ã‚’ã‚°ãƒ©ãƒ•ã«è¡¨ç¤ºã™ã‚‹ã‚³ãƒ¼ãƒ‰

```py:norm.py
import pandas as pd
import matplotlib.pyplot as plt


if __name__ == '__main__':

    df = pd.read_csv('./data/Accelerometer.csv')
    # normã‚’è¨ˆç®—
    df['norm'] = (df['x']**2 + df['y']**2 + df['z']**2)**0.5
    plt.plot(df['t'], df['norm'], zorder=1)
    plt.xlabel('time(s)')
    plt.ylabel('norm\n(m/s^2)', rotation=0, ha='right', va='top')
    # Yè»¸ãƒ©ãƒ™ãƒ«ã®ä½ç½®ã‚’èª¿æ•´
    plt.gca().yaxis.set_label_coords(0, 1.1)
    plt.show()
```

[![Image from Gyazo](https://i.gyazo.com/078e67797a134cfddafe87f7c9a3b5d9.jpg)](https://gyazo.com/078e67797a134cfddafe87f7c9a3b5d9)

æ­©è¡Œä¿¡å·ã¯ä½å‘¨æ³¢æˆåˆ†ãªã®ã§ãƒ­ãƒ¼ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ã‹ã‘ãƒã‚¤ã‚ºã‚’è»½æ¸›ã™ã‚‹.
ä»Šå›ã¯ç§»å‹•å¹³å‡ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹.


```py:lowpass.py
import pandas as pd
import matplotlib.pyplot as plt

if __name__ == '__main__':

    df = pd.read_csv('./data/Accelerometer.csv')

    # normã‚’è¨ˆç®—
    df['norm'] = (df['x']**2 + df['y']**2 + df['z']**2)**0.5
    df['low_norm'] = df['norm'].rolling(window=10).mean()

    plt.plot(df['t'], df['low_norm'], zorder=1)
    plt.xlabel('time(s)')
    plt.ylabel('norm\n(m/s^2)', rotation=0, ha='right', va='top')
    # Yè»¸ãƒ©ãƒ™ãƒ«ã®ä½ç½®ã‚’èª¿æ•´
    plt.gca().yaxis.set_label_coords(0, 1.1)


    plt.show()

```

é«˜å‘¨æ³¢æˆåˆ†ãŒæ¸›å°‘ã—ã¦ã„ã‚‹ï¼
[![Image from Gyazo](https://i.gyazo.com/70dbc8b71a36e69b61dc1e994bcccaae.jpg)](https://gyazo.com/70dbc8b71a36e69b61dc1e994bcccaae)


ãƒ”ãƒ¼ã‚¯å€¤ã‚’æ±‚ã‚æ­©æ•°ã‚’æ¨å®šã™ã‚‹ï¼
å¯è¦–åŒ–ã•ã‚ŒãŸã‚°ãƒ©ãƒ•ã‹ã‚‰normãŒ12(m/s^2)ä»¥ä¸Šã®å ´åˆä¸€æ­©ã¨åˆ¤å®šã™ã‚‹.

```py:peek.py
import pandas as pd
import matplotlib.pyplot as plt
from scipy import signal

if __name__ == '__main__':

    df = pd.read_csv('./data/Accelerometer.csv')

    # normã‚’è¨ˆç®—
    df['norm'] = (df['x']**2 + df['y']**2 + df['z']**2)**0.5
    df['low_norm'] = df['norm'].rolling(window=10).mean()

    plt.plot(df['t'], df['low_norm'], zorder=1)
    plt.xlabel('time(s)')
    plt.ylabel('norm\n(m/s^2)', rotation=0, ha='right', va='top')
    # Yè»¸ãƒ©ãƒ™ãƒ«ã®ä½ç½®ã‚’èª¿æ•´
    plt.gca().yaxis.set_label_coords(0, 1.1)

    peek, _ = signal.find_peaks(df['low_norm'], height=12)
    # èµ¤ç‚¹ã‚’æç”»
    plt.scatter(df['t'][peek], df['low_norm']
                [peek], s=15, color='red', zorder=2)

    plt.show()

```



[![Image from Gyazo](https://i.gyazo.com/7da15e73822bec330403ce8785c87290.jpg)](https://gyazo.com/7da15e73822bec330403ce8785c87290)
9æ­©+5æ­©ã®æ­©æ•°æ¨å®šãŒã§ãã¦ã„ã‚‹ï¼


## æ­©è¡Œæ–¹å‘ã®æ¨å®š
æ­©è¡Œè»Œè·¡ã‚’ã‚°ãƒ©ãƒ•ã§è¡¨ç¾ã™ã‚‹ã«ã¯ï¼Œã©ã®æ–¹å‘ã«é€²ã‚“ã ã®ã‹ã‚’ç¤ºã™è§’åº¦ã‚’æ±‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼è§’é€Ÿåº¦ãƒ‡ãƒ¼ã‚¿ã‚’åˆ©ç”¨ã—ã¦ï¼Œé€²è¡Œæ–¹å‘ã®è§’åº¦ã‚’è¨ˆç®—ã§ãã‚‹ï¼ä»Šå›ã®å®Ÿé¨“ã§ã¯ï¼Œã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚’æ¨ªå‘ãã«ä½“ã«å–ã‚Šä»˜ã‘ã¦ã„ã‚‹ãŸã‚ï¼Œxè»¸ã®è§’é€Ÿåº¦ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦é€²è¡Œæ–¹å‘ã®è§’åº¦ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ï¼


[![Image from Gyazo](https://i.gyazo.com/ad9c4def73ca2ed401d146b63259dfcf.jpg)](https://gyazo.com/ad9c4def73ca2ed401d146b63259dfcf)

è§’é€Ÿåº¦ã®CSVãƒ•ã‚¡ã‚¤ãƒ«
```cs:Gyroscope.csv
"Time (s)","X (rad/s)","Y (rad/s)","Z (rad/s)"
8.547250007E-3,-6.150873378E-2,-6.603101641E-2,2.339305729E-2
1.862424999E-2,2.087008394E-2,-8.130924404E-2,1.806256361E-2
2.870025000E-2,8.376302570E-2,-4.760587960E-2,9.836326353E-3
...
```
ã“ã‚Œã‚‚å…ˆã»ã©ã¨åŒã˜ã‚ˆã†ã«ã‚«ãƒ©ãƒ åã‚’å¤‰æ›´ã™ã‚‹ï¼

```cs:Gyroscope.csv
"t","x","y","z"
8.547250007E-3,-6.150873378E-2,-6.603101641E-2,2.339305729E-2
1.862424999E-2,2.087008394E-2,-8.130924404E-2,1.806256361E-2
2.870025000E-2,8.376302570E-2,-4.760587960E-2,9.836326353E-3
...
```


xè»¸ã®è§’é€Ÿåº¦ã¨çµŒéæ™‚é–“tã®ã‚°ãƒ©ãƒ•ï¼
```py:angular_velocity_x.py

import pandas as pd
import matplotlib.pyplot as plt

if __name__ == '__main__':

    gyro_data = pd.read_csv('./data/Gyroscope.csv')
    plt.xlabel('time (s)')
    plt.ylabel('rad/s')
    plt.plot(gyro_data['x'])
    plt.show()
```

[![Image from Gyazo](https://i.gyazo.com/1a6cd6ff83924f2e8633f250b051bbd4.png)](https://gyazo.com/1a6cd6ff83924f2e8633f250b051bbd4)


è§’é€Ÿåº¦ã‚’ç©åˆ†ã—ã¦xè»¸è§’åº¦ã¨çµŒéæ™‚é–“tã®ã‚°ãƒ©ãƒ•ã‚’æ±‚ã‚ã‚‹ï¼
ä»Šå›ã¯å®šç©åˆ†ã§æ±‚ã‚ã‚‹ãŒå°å½¢ç©åˆ†ãªã©ã‚’ç”¨ã„ãŸæ–¹ãŒã‚ˆã‚Šæ­£ç¢ºãªã‚‚ã®ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼


```py:angle_x.py
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt



# Constants
SAMPLING_FREQ = 100  # Hz
DT = 1 / SAMPLING_FREQ

if __name__ == '__main__':

    gyro_data = pd.read_csv('./data/Gyroscope.csv')
    angle_data = np.cumsum(gyro_data * DT) 

    # Plot angle data
    plt.xlabel('time (s)')
    plt.ylabel('angle x(rad)')
    plt.plot(angle_data['x'])
    
    plt.show()
```

[![Image from Gyazo](https://i.gyazo.com/0f86dc8e40dc30c81eae5a66163d6eca.png)](https://gyazo.com/0f86dc8e40dc30c81eae5a66163d6eca)


## æ­©è¡Œæ™‚ã®è§’åº¦ã‚’æ±‚ã‚ã‚‹
ã“ã“ã§ã¯æ­©ã„ãŸæ™‚ã®è§’åº¦ã‚’æ±‚ã‚ã‚‹ï¼ãã®ãŸã‚ã«ã¯ãƒ”ãƒ¼ã‚¯æ™‚ã®è§’åº¦ã®æƒ…å ±ãŒå¿…è¦ã§ã‚ã‚‹ï¼
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µã¨ã‚¸ãƒ£ã‚¤ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åŒæ™‚ã«ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹éš›,ãƒ‡ãƒ¼ã‚¿ã®æ™‚é–“ãŒå¾®å¦™ã«ãšã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ï¼ãã®ãŸã‚CSVãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒåŒã˜ã§ã‚ã£ã¦ã‚‚ï¼å®Ÿéš›ã«ã¯ç•°ãªã‚‹æ™‚é–“ã‚’ç¤ºã™å ´åˆãŒã‚ã‚‹ï¼ã“ã®å•é¡Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«åŠ é€Ÿåº¦ã®ãƒ”ãƒ¼ã‚¯æ™‚ã®æ™‚é–“ï¼ˆtï¼‰ã¨è§’åº¦ã®æ™‚é–“ï¼ˆtï¼‰ã‚’å°æ•°ç‚¹ä»¥ä¸‹ç¬¬äºŒä½ã§å››æ¨äº”å…¥ã™ã‚‹ï¼ãã®å¾Œå››æ¨äº”å…¥ã•ã‚ŒãŸæ™‚é–“ãŒä¸€è‡´ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã‚’æ¢ã—ï¼Œãã®æ™‚ç‚¹ã§ã®è§’åº¦ã‚’å–å¾—ã™ã‚‹ï¼


```py:main.py
import numpy as np
import pandas as pd
from scipy import signal


# Constants
ACC_FILE_PATH = './data/Accelerometer.csv'
GYRO_FILE_PATH = './data/Gyroscope.csv'
SAMPLING_FREQ = 100  # Hz
DT = 1 / SAMPLING_FREQ 


def search_peek_time(file_path):
    df = pd.read_csv(file_path)
    df['norm'] = (df['x']**2 + df['y']**2 + df['z']**2)**0.5
    df['low_norm'] = df['norm'].rolling(window=10).mean()
    # ãƒ”ãƒ¼ã‚¯ã‚’æ¤œå‡º
    peek, _ = signal.find_peaks(df['low_norm'], height=12)
    ## peekã®tã‚’å–å¾—
    peek_t = df['t'][peek]

    return np.round(peek_t,2)



if __name__ == '__main__':
    gyro_data = pd.read_csv(GYRO_FILE_PATH)
    # 't'åˆ—ã‚’é™¤å¤–ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    gyro_data_no_t = gyro_data.drop(columns=['t'])
    # 'x', 'y', 'z'åˆ—ã®ã¿ã‚’ç©åˆ†
    angle_data_no_t = np.cumsum(gyro_data_no_t * DT)
    # ç©åˆ†ã—ãŸãƒ‡ãƒ¼ã‚¿ã«'t'åˆ—ã‚’çµåˆ
    angle_data = pd.concat([gyro_data['t'], angle_data_no_t], axis=1)
    angle_data['rounded_t'] = np.round(angle_data['t'], 2)
    # search_peek_time()ã®keysã‚’å–å¾—
    peek_t_values = search_peek_time(ACC_FILE_PATH).values
    angle_data_peek = angle_data[angle_data['rounded_t'].isin(peek_t_values)]
    angle_data_peek_x = angle_data_peek['x']
    print(angle_data_peek)
```


å‡ºåŠ›çµæœ(ãƒ”ãƒ¼ã‚¯å€¤ã®è§’åº¦ãƒ‡ãƒ¼ã‚¿)
```
              t         x         y         z  rounded_t
503    5.076937  0.094959 -0.111002 -0.011993       5.08
558    5.631134  0.007126 -0.051790  0.009836       5.63
609    6.145030  0.071138 -0.096628  0.037697       6.15
661    6.668999  0.009766 -0.053564 -0.040562       6.67
715    7.213116  0.118669 -0.085296  0.028185       7.21
764    7.706856 -0.014282 -0.063530 -0.001579       7.71
818    8.250977  0.111747 -0.057000  0.059152       8.25
870    8.774946 -0.043131  0.015567 -0.043714       8.77
923    9.308991  0.141047  0.004879  0.020186       9.31
1169  11.787768  1.645838 -0.263107  0.351863      11.79
1229  12.392348  1.555281 -0.147883  0.359222      12.39
1285  12.956623  1.703267 -0.235061  0.398748      12.96
1343  13.541050  1.574113 -0.079940  0.353160      13.54
1397  14.085172  1.798909 -0.103649  0.400171      14.09
```


## ãƒãƒ«ãƒ ã¨è§’åº¦ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰x,yåº§æ¨™ã§è¡¨ç¾

æ­©å¹…ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ä»Šå›ã¯1æ­©30cmã¨è¨­å®šã™ã‚‹ï¼
ã“ã®æ­©å¹…ãŒx,yåº§æ¨™ã«ãŠã‘ã‚‹ãƒãƒ«ãƒ ã«è©²å½“ã™ã‚‹ï¼
é€²è¡Œæ–¹å‘ã¨ãƒãƒ«ãƒ ãŒåˆ†ã‹ã‚Œã°x,yåº§æ¨™ã«æ­©è¡Œè»Œè·¡ã‚’è¡¨ã›ã‚‹.
[![Image from Gyazo](https://i.gyazo.com/ab0cfffe42204a513c6143dd3596c7bc.png)](https://gyazo.com/ab0cfffe42204a513c6143dd3596c7bc)

```py:main.py

import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from scipy import signal


# Constants
ACC_FILE_PATH = './data/Accelerometer.csv'
GYRO_FILE_PATH = './data/Gyroscope.csv'
SAMPLING_FREQ = 100  # Hz
DT = 1 / SAMPLING_FREQ 
STEP_LENGTH = 30  # cm


def search_peek_time(file_path):
    df = pd.read_csv(file_path)
    df['norm'] = (df['x']**2 + df['y']**2 + df['z']**2)**0.5
    df['low_norm'] = df['norm'].rolling(window=10).mean()
    # ãƒ”ãƒ¼ã‚¯ã‚’æ¤œå‡º
    peek, _ = signal.find_peaks(df['low_norm'], height=12)
    ## peekã®tã‚’å–å¾—
    peek_t = df['t'][peek]

    return np.round(peek_t,2)



if __name__ == '__main__':
    gyro_data = pd.read_csv(GYRO_FILE_PATH)
    # 't'åˆ—ã‚’é™¤å¤–ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    gyro_data_no_t = gyro_data.drop(columns=['t'])
    # 'x', 'y', 'z'åˆ—ã®ã¿ã‚’ç©åˆ†
    angle_data_no_t = np.cumsum(gyro_data_no_t * DT)
    # ç©åˆ†ã—ãŸãƒ‡ãƒ¼ã‚¿ã«'t'åˆ—ã‚’çµåˆ
    angle_data = pd.concat([gyro_data['t'], angle_data_no_t], axis=1)
    angle_data['rounded_t'] = np.round(angle_data['t'], 2)
    # search_peek_time()ã®keysã‚’å–å¾—
    peek_t_values = search_peek_time(ACC_FILE_PATH).values
    angle_data_peek = angle_data[angle_data['rounded_t'].isin(peek_t_values)]
    angle_data_peek_x = angle_data_peek['x']
    
    x_displacement = STEP_LENGTH * np.cos(angle_data_peek_x)
    y_displacement = STEP_LENGTH * np.sin(angle_data_peek_x)
    x_cumulative = np.cumsum(x_displacement)
    y_cumulative = np.cumsum(y_displacement)
    # åˆæœŸåº§æ¨™(0,0)ãŒæç”»ã•ã‚Œã‚‹ã‚ˆã†ã«æŒ¿å…¥
    x_cumulative = np.insert(x_cumulative, 0, 0)
    y_cumulative = np.insert(y_cumulative, 0, 0)
    
    plt.figure()
    plt.plot(x_cumulative, y_cumulative, marker='o')
    x_max = max(x_cumulative)
    y_max = max(y_cumulative)
    #è»¸ã‚’æƒãˆã‚‹
    plt.xlim(0,max(x_max,y_max)+10)
    plt.ylim(0,max(x_max,y_max)+10)
    plt.xlabel('X Displacement (cm)')
    plt.ylabel('Y Displacement (cm)')
    plt.title('Cumulative X and Y Displacement')
    plt.grid()
    plt.show()


```


[![Image from Gyazo](https://i.gyazo.com/8075b1d9b45a6ef7d973fe7295df7839.png)](https://gyazo.com/8075b1d9b45a6ef7d973fe7295df7839)

ç›´é€²ã™ã‚‹æ­©è¡Œãƒ‡ãƒ¼ã‚¿å…ƒã«ãƒ—ãƒ­ãƒƒãƒˆã—ãŸãŒå®Ÿéš›ã«ã¯è§’é€Ÿåº¦ãŒå¾®å¦™ã«ä¹—ã‚‹ãŸã‚å®Œå…¨ãªç›´ç·šã§ã¯ãªã„ï¼
æ­©ãæ­©æ•°ãŒå¤šããªã‚‹ã»ã©ã“ã®è§’é€Ÿåº¦ãŒç©ã¿é‡ãªã‚Šèª¤å·®ã«ã¤ãªãŒã‚‹ã®ã§ãã®å ´åˆã¯è£œæ­£ãªã©ã‚’è¡Œã„èª¤å·®ã‚’è»½æ¸›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼






## çµ‚ã‚ã‚Šã«

ä»Šå›ã¯åŠ é€Ÿåº¦ï¼Œè§’é€Ÿåº¦ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ­©è¡Œè»Œè·¡ã‚’æã„ãŸï¼
æ©Ÿä¼šãŒã‚ã‚Œã°ãƒ‰ãƒªãƒ•ãƒˆã®é™¤å»ã‚„é«˜ä½å·®ãŒã‚ã‚‹ã‚ˆã†ãªå ´åˆã®æ­©è¡Œæ¨å®šãªã©ã‚‚è¡Œã„ãŸã„ï¼
ä»Šå›ä½¿ç”¨ã—ãŸã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã¨ã‚³ãƒ¼ãƒ‰ã¯GitHubã«ã‚‚å…¬é–‹ã—ã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã‚‚å‚è€ƒã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ï¼


https://github.com/happy663/walking-estimates



